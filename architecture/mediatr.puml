@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

HIDE_STEREOTYPE()

title Code diagram for MediatR Pipeline

Boundary(mediatr, "MediatR") {

    namespace Behaviors {
             class EFTransactionBehavior {
            -_httpContextAccessor
            -_logger
            +Handle()
        }
        class LoggingBehavior {
            -_httpContextAccessor
            -_logger
            +Handle()
        }
        class ValidatorBehavior {
            -_validators
            -_logger
            +Handle()
        }
    }
    
    namespace MediatR{
        interface ISecuritySensitive {
            GetSafeCopy()
        }
        interface ITransactionalRequest
        interface IRequest<T>
        interface IRquestHandler<TRequest, TResponse> {
            TResponse Handle()
        }
    }

    namespace Result{
        class RequestResult implements IRequestResult {
        Result
        }

        interface IRequestResult {
            Success
            IsNotFound
            IsNotValid
            Data
            {static} Succeeded()
            {static} NotFound(object data)
            {static} NotValid(object data)
        }
    }

    class Extensions {
        {static} +AddMediatRServices()
    }
}

Lay_L(MediatR.IRquestHandler, MediatR.IRequest)
Lay_U(MediatR.IRequest, MediatR.ITransactionalRequest)
Lay_L(Result.RequestResult, Result.IRequestResult)
Lay_U(Result.IRequestResult, MediatR.IRequest)
Lay_U(Behaviors.ValidatorBehavior, Behaviors.LoggingBehavior)
Lay_U(Extensions, Behaviors.ValidatorBehavior)

@enduml